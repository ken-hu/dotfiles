# ENV
export WSPACE=$HOME/work
export NUODB_HOME=$WSPACE/nuodb/dist
export THIRDPARTY_DIR=$WSPACE/nuo3rdparty
export USE_CCACHE=true

export TESTS=$HOME/nuodbtests/sqllogic/test
export DYLD_LIBRARY_PATH=$NUODB_HOME/lib64/
export BINARY=$WSPACE/PortSLT/src
export ODBCINI=$WSPACE/odbc.ini

export PKG_CONFIG_PATH="/usr/local/Cellar/icu4c/58.2/lib/pkgconfig:$PKG_CONFIG_PATH"

# PATH
[[ -d "$THIRDPARTY_DIR" ]] && PATH=$THIRDPARTY_DIR/common/bin:$PATH
[[ -x "$(which nuoarch)" ]] && PATH=$THIRDPARTY_DIR/$(nuoarch)/bin:$PATH

# alias
alias n='cd $WSPACE/nuodb'
alias s='nstart'
alias sql='./dist/bin/nuosql test@localhost --user dba --password dba'
alias sqlt='./dist/bin/nuosql test@localhost --user dba --password dba --timer full'
alias bcfg='./build/bld cfg -G "Unix Makefiles" -b Debug'
alias bcfgr='./build/bld cfg -G "Unix Makefiles" -b RelWithDebInfo'
alias bc='./build/bld cpp'
alias bn='./build/bld cpp --target nuodb'
alias bsql='./build/bld cpp --target nuosql'
alias b='./build/bld'

__cdhooks_update_env() {
    builtin "$@"
    if [ $(dirname $PWD) = $WSPACE ] && [ -d $PWD/dist ]; then
      export NUODB_HOME=$PWD/dist
      echo "NUODB_HOME is now $NUODB_HOME"
    fi
}

__cdhooks_worktree() {
    __cdhooks_update_env cd $WSPACE/$1
}

alias cd='__cdhooks_update_env cd'
alias cdwt='__cdhooks_worktree'
